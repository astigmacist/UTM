<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            text-align: center;
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="spinner"></div>
        <h2>–ü–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è...</h2>
        <p>–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ</p>
    </div>

    <script>
        // ===== –ù–ê–°–¢–†–û–ô–ö–ò =====
        // –£–∫–∞–∂–∏—Ç–µ —Å—é–¥–∞ –≤–∞—à—É —Å—Å—ã–ª–∫—É, –∫—É–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å
        const TARGET_URL = 'https://astanahub.com/'; // Astana Hub - —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫
        
        // API endpoint (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
        const API_URL = window.location.origin + '/api/track';
        
        // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
        function getDeviceType() {
            const ua = navigator.userAgent;
            if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {
                return 'üì± –ü–ª–∞–Ω—à–µ—Ç';
            }
            if (/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {
                return 'üì± –¢–µ–ª–µ—Ñ–æ–Ω';
            }
            return 'üíª –ö–æ–º–ø—å—é—Ç–µ—Ä';
        }
        
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            let browser = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π';
            
            if (ua.indexOf('Firefox') > -1) browser = 'ü¶ä Firefox';
            else if (ua.indexOf('SamsungBrowser') > -1) browser = 'üì± Samsung Browser';
            else if (ua.indexOf('Opera') > -1 || ua.indexOf('OPR') > -1) browser = 'üé≠ Opera';
            else if (ua.indexOf('Trident') > -1) browser = 'üåê IE';
            else if (ua.indexOf('Edge') > -1) browser = 'üåÄ Edge';
            else if (ua.indexOf('Chrome') > -1) browser = 'üåê Chrome';
            else if (ua.indexOf('Safari') > -1) browser = 'üß≠ Safari';
            
            return browser;
        }
        
        function getOS() {
            const ua = navigator.userAgent;
            if (ua.indexOf('Win') > -1) return 'ü™ü Windows';
            if (ua.indexOf('Mac') > -1) return 'üçé macOS';
            if (ua.indexOf('Linux') > -1) return 'üêß Linux';
            if (ua.indexOf('Android') > -1) return 'ü§ñ Android';
            if (ua.indexOf('iOS') > -1 || ua.indexOf('iPhone') > -1 || ua.indexOf('iPad') > -1) return 'üì± iOS';
            return '‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è';
        }
        
        // ===== –ö–û–î –¢–†–ï–ö–ò–ù–ì–ê =====
        async function trackClick() {
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                const clickData = {
                    // –ò—Å—Ç–æ—á–Ω–∏–∫
                    referrer: document.referrer || '–ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥',
                    referrerDomain: document.referrer ? new URL(document.referrer).hostname : '–ù–µ—Ç',
                    
                    // –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ —Å–∏—Å—Ç–µ–º–∞
                    device: getDeviceType(),
                    browser: getBrowserInfo(),
                    os: getOS(),
                    
                    // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
                    screenResolution: `${screen.width}x${screen.height}`,
                    windowSize: `${window.innerWidth}x${window.innerHeight}`,
                    language: navigator.language || navigator.userLanguage,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
                    onlineStatus: navigator.onLine ? 'üü¢ –û–Ω–ª–∞–π–Ω' : 'üî¥ –û—Ñ—Ñ–ª–∞–π–Ω',
                    cookiesEnabled: navigator.cookieEnabled ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç',
                    
                    // URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (UTM –º–µ—Ç–∫–∏)
                    urlParams: window.location.search,
                    
                    // –ü–æ–ª–Ω—ã–π User Agent (–¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)
                    userAgent: navigator.userAgent
                };
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(clickData)
                });
                
                const result = await response.json();
                console.log('‚úÖ –ö–ª–∏–∫ –∑–∞–ø–∏—Å–∞–Ω!', result);
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–∫–∞:', error);
            }
        }
        
        // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∫–ª–∏–∫
        trackClick();
        
        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(() => {
            window.location.href = TARGET_URL;
        }, 1000);
    </script>
</body>
</html>
